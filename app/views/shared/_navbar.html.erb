<nav id="navbar-stick" class="navbar sticky-top navbar-static-top navbar-light bg-light d-flex justify-content-between">
  <%= link_to root_path do %>
    <span class="navbar-brand mb-0 h1"><i class="fas fa-paw"></i> BarcSnap!</span>
  <% end %>
  <% if current_user.nil? %>
    <!-- <p class="my-auto">Navbar punchline</p> -->
    <% cl_image = cl_image_tag("https://dummyimage.com/25x25/fff/000&text=%3F", type: "fetch", class: "rounded-circle my-auto") %>
  <% else %>
    <% username = (current_user.display_name.blank? || current_user.display_name.nil?) ? current_user.email.split('@')[0] : current_user.display_name  %>
    <!-- <p class="my-auto">Navbar punchline <%#= username %></p> -->
    <!-- <p class="my-auto"><%#= username %></p> -->
    <% if current_user.photo.attached? %>
      <% cl_image = cl_image_tag(current_user.photo.key, class: "rounded-circle my-auto", width: 24, height: 24) %>
    <% else %>
      <% initial = (current_user.display_name.blank? || current_user.display_name.nil?) ? current_user.email[0].upcase : current_user.display_name[0].upcase; %>
      <% cl_image = cl_image_tag("https://dummyimage.com/25x25/fff/000&text=#{initial}", type: "fetch", class: "rounded-circle my-auto") %>
    <% end %>
  <% end %>
  <div class="d-flex">
    <%= cl_image if cl_image %>
    <li class="nav-item dropdown">
      <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fas fa-chevron-down"></i>
      </a>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
        <% if user_signed_in? %>
          <p class="dropdown-item disabled">Welcome, <%= username %>!</p>
          <div class="dropdown-divider"></div>
          <%= link_to '#' do %>
            <p class="dropdown-item">My User Profile</p>
          <% end %>
          <%= link_to edit_user_registration_path do %>
            <p class="dropdown-item">Update my profile</p>
          <% end %>
          <div class="dropdown-divider"></div>
          <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "dropdown-item" %>
        <% else %>
          <%= link_to "Login", new_user_session_path, class: "nav-link" %>
        <% end %>
      </div>
    </li>
  </div>
</nav>
<%# <div id="google_translate_element"></div>
<script type="text/javascript">
  var duplicate_google_translate_counter = 0; // this should stop Google adding button multiple times
  function googleTranslateElementInit() {
    if (duplicate_google_translate_counter == 0) {
      new google.translate.TranslateElement({pageLanguage: 'ja'}, 'google_translate_element');
    }
    duplicate_google_translate_counter++;
  }
</script>
<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> %>
